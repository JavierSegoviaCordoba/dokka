[//]: # (title: Maven plugin)

To generate documentation for Maven-based projects, you can use [Dokka Maven plugin](#applying-the-plugin).

> Compared to the [Gradle plugin](gradle.md), Maven plugin has only basic features and 
> does not provide support for multimodule builds out of the box.
> 
{type="note"}

You can play around with Dokka and see how it can be configured for a Maven project by visiting
[Maven example](https://github.com/Kotlin/dokka/tree/%dokkaVersion%/examples/maven) project.

## Applying the plugin

To apply the plugin, you need to add it to the plugins section of your POM:

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.jetbrains.dokka</groupId>
            <artifactId>dokka-maven-plugin</artifactId>
            <version>%dokkaVersion%</version>
            <executions>
                <execution>
                    <phase>pre-site</phase>
                    <goals>
                        <goal>dokka</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
```

## Generating documentation

Following goals are provided by the plugin:

### Stable

| **Goal**      | **Description**                                                                        |
|---------------|----------------------------------------------------------------------------------------|
| `dokka:dokka` | Generates documentation with Dokka plugins applied. [HTML](html.md) format by default. |

### Experimental

| **Goal**           | **Description**                                                                             |
|--------------------|---------------------------------------------------------------------------------------------|
| `dokka:javadoc`    | Generates documentation in [Javadoc](javadoc.md) format.                                    |
| `dokka:javadocJar` | Generates a `javadoc.jar` file that contains documentation in [Javadoc](javadoc.md) format. |

### Other output formats

By default, Maven plugin will build documentation in [HTML](html.md) format.

All other output formats come as [Dokka plugins](plugins_introduction.md). In order to use it, you have to apply
it as a dependency.

For example, to use experimental [GFM](markdown.md#gfm) format, you have to apply `org.jetbrains.dokka:gfm-plugin` in 
the following way:

```xml
<plugin>
    <groupId>org.jetbrains.dokka</groupId>
    <artifactId>dokka-maven-plugin</artifactId>
    ...
    <configuration>
        <dokkaPlugins>
            <plugin>
                <groupId>org.jetbrains.dokka</groupId>
                <artifactId>gfm-plugin</artifactId>
                <version>%dokkaVersion%</version>
            </plugin>
        </dokkaPlugins>
    </configuration>
</plugin>
```

After that, running `dokka:dokka` goal should produce documentation in GFM format.

You can learn more about Dokka plugins in [a separate topic](plugins_introduction.md).

## Building javadoc.jar

Unlike the [Gradle plugin](gradle.md#building-javadoc-jar), Maven plugin comes with ready-to-use `dokka:javadocJar` goal.
By default, it will generate documentation in [Javadoc](javadoc.md) format under `target` folder.

If you are not satisfied with the built-in goal or want to customize the output (for instance, you want to generate
documentation in [HTML](html.md) format instead of Javadoc), similar behaviour can be achieved by adding the
Maven jar plugin with the following configuration:

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>3.3.0</version>
    <executions>
        <execution>
            <goals>
                <goal>test-jar</goal>
            </goals>
        </execution>
        <execution>
            <id>dokka-jar</id>
            <phase>package</phase>
            <goals>
                <goal>jar</goal>
            </goals>
            <configuration>
                <classifier>dokka</classifier>
                <classesDirectory>${project.build.directory}/dokka</classesDirectory>
                <skipIfEmpty>true</skipIfEmpty>
            </configuration>
        </execution>
    </executions>
</plugin>
```

The documentation and the `.jar` archive for it can then be generated by running `dokka:dokka` and `jar:jar@dokka-jar` goals:

```Bash
mvn dokka:dokka jar:jar@dokka-jar
```

## Configuration

Maven's plugin configuration block can be used to configure Dokka.

Example of basic configuration that only changes output location of documentation:

```xml
<plugin>
    <groupId>org.jetbrains.dokka</groupId>
    <artifactId>dokka-maven-plugin</artifactId>
    ...
    <configuration>
        <outputDir>${project.basedir}/target/documentation/dokka</outputDir>
    </configuration>
</plugin>
```

## Configuration options

Dokka has many configuration options to tailor your experience.

Below you will find examples and descriptions for each configuration section. You can also find an example with
[all configuration options](#complete-configuration) applied at once at the very bottom.

### General configuration

```xml
<plugin>
    <groupId>org.jetbrains.dokka</groupId>
    <artifactId>dokka-maven-plugin</artifactId>
    <!--  ...  -->
    <configuration>
        <skip>false</skip>
        <moduleName>${project.artifactId}</moduleName>
        <outputDir>${project.basedir}/target/documentation</outputDir>
        <failOnWarning>false</failOnWarning>
        <suppressObviousFunctions>true</suppressObviousFunctions>
        <suppressInheritedMembers>false</suppressInheritedMembers>
        <offlineMode>false</offlineMode>
        <sourceDirectories>
            <dir>${project.basedir}/src/main/kotlin</dir>
        </sourceDirectories>
        <documentedVisibilities>
            <visibility>PUBLIC</visibility>
            <visibility>PROTECTED</visibility>
        </documentedVisibilities>
        <reportUndocumented>false</reportUndocumented>
        <skipDeprecated>false</skipDeprecated>
        <skipEmptyPackages>true</skipEmptyPackages>
        <suppressedFiles>
            <file>/path/to/dir</file>
            <file>/path/to/file</file>
        </suppressedFiles>
        <jdkVersion>8</jdkVersion>
        <languageVersion>1.7</languageVersion>
        <apiVersion>1.7</apiVersion>
        <noStdlibLink>false</noStdlibLink>
        <noJdkLink>false</noJdkLink>
        <includes>
            <include>packages.md</include>
            <include>extra.md</include>
        </includes>
        <classpath>${project.compileClasspathElements}</classpath>
        <samples>
            <dir>${project.basedir}/samples</dir>
        </samples>
        <sourceLinks>
            <!-- Separate section -->
        </sourceLinks>
        <externalDocumentationLinks>
            <!-- Separate section -->
        </externalDocumentationLinks>
        <perPackageOptions>
            <!-- Separate section -->
        </perPackageOptions>
    </configuration>
</plugin>
```

<deflist>
    <def title="skip">
        <p>Whether to skip documentation generation.</p>
        <p>Default is <code>false</code>.</p>
    </def>
    <def title="moduleName">
        <p>Display name used to refer to the project/module. Used for ToC, navigation, logging, etc.</p>
        <p>Default is <code>{project.artifactId}</code>.</p>
    </def>
    <def title="outputDir">
        <p>Directory to which documentation will be generated.</p>
        <p>Default is <code>{project.basedir}/target/dokka</code>.</p>
    </def>
    <def title="failOnWarning">
        <p>
            Whether to fail documentation generation if Dokka has emitted a warning or an error. Will wait until 
            all errors and warnings have been emitted first.
        </p>
        <p>This setting works well with <code>reportUndocumented</code>.</p>
        <p>Default is <code>false</code>.</p>
    </def>
    <def title="suppressObviousFunctions">
        <p>Whether to suppress obvious functions.</p>
        <p>
            A function is considered to be obvious if it is:
            <list>
                <li>
                    Inherited from <code>kotlin.Any</code>, <code>Kotlin.Enum</code>, <code>java.lang.Object</code> or 
                    <code>java.lang.Enum</code>, such as <code>equals</code>, <code>hashCode</code>, <code>toString</code>`.
                </li>
                <li>
                    Synthetic (generated by the compiler) and does not have any documentation, such as 
                    <code>dataClass.componentN</code> or <code>dataClass.copy</code>.
                </li>
            </list>
        </p>
        <p>Default is <code>true</code></p>
    </def>
    <def title="suppressInheritedMembers">
        <p>Whether to suppress inherited members that aren't explicitly overridden in a given class.</p>
        <p>
            Note: this can suppress functions such as <code>equals</code>/<code>hashCode</code>/<code>toString</code>, 
            but cannot suppress synthetic functions such as <code>dataClass.componentN</code> and 
            <code>dataClass.copy</code>. Use <code>suppressObviousFunctions</code> for that.
        </p>
        <p>Default is <code>false</code>.</p>
    </def>
    <def title="offlineMode">
        <p>Whether to resolve remote files/links over network.</p>
        <p>
            This includes package-lists used for generating external documentation links: 
            for instance, to make classes from standard library clickable.
        </p>
        <p>
            Setting this to <code>true</code> can significantly speed up build times in certain cases,
            but can also worsen documentation quality and user experience, for instance by
            not resolving some dependency's class/member links.
        </p>
        <p>
            When using offline mode, you can cache fetched files locally and provide them to
            Dokka as local paths, see <code>externalDocumentationLinks</code> section.
        </p>
        <p>Default is <code>false</code>.</p>
    </def>
    <def title="sourceDirectories">
        <p>
            Source code roots to be analyzed and documented.
            Accepts directories and individual <code>.kt</code> / <code>.java</code> files.
        </p>
        <p>Default is <code>{project.compileSourceRoots}</code>.</p>
    </def>
    <def title="documentedVisibilities">
        <p>Set of visibility modifiers that should be documented.</p>
        <p>
            This can be used if you want to document protected/internal/private declarations,
            as well as if you want to exclude public declarations and only document internal API.
        </p>
        <p>Can be configured on per-package basis.</p>
        <p>Default is <code>PUBLIC</code>.</p>
    </def>
    <def title="reportUndocumented">
        <p>
            Whether to emit warnings about visible undocumented declarations, that is declarations without KDocs 
            after they have been filtered by <code>documentedVisibilities</code>.
        </p>
        <p>This setting works well with <code>failOnWarning</code>.</p>
        <p>Can be overridden on package level.</p>
        <p>Default is <code>false</code>.</p>
    </def>
    <def title="skipDeprecated">
        <p>Whether to document declarations annotated with <code>@Deprecated</code>.</p>
        <p>Can be overridden on package level.</p>
        <p>Default is <code>false</code>.</p>
    </def>
    <def title="skipEmptyPackages">
        <p>Whether to skip packages that contain no visible declarations after various filters have been applied.</p>
        <p>
            For instance, if <code>skipDeprecated</code> is set to <code>true</code> and your package contains only 
            deprecated declarations, it will be considered to be empty.</p>
        <p>Default is <code>true</code>.</p>
    </def>
    <def title="suppressedFiles">
        <p>
            Directories or individual files that should be suppressed, meaning declarations from them 
            will be not documented.
        </p>
    </def>
    <def title="jdkVersion">
        <p>JDK version to use when generating external documentation links for Java types.</p>
        <p>
            For instance, if you use <code>java.util.UUID</code> from JDK in some public declaration signature,
            and this property is set to <code>8</code>, Dokka will generate an external documentation link
            to <a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">JDK 8 Javadocs</a> for it.
        </p>
        <p>Default is JDK 8.</p>
    </def>
    <def title="languageVersion">
        <p>
            <a href="https://kotlinlang.org/docs/compatibility-modes.html">Kotlin language version</a>
            used for setting up analysis and <a href="https://kotlinlang.org/docs/kotlin-doc.html#sample-identifier">@sample</a>
            environment.
        </p>
        <p>By default, the latest language version available to Dokka's embedded compiler will be used.</p>
    </def>
    <def title="apiVersion">
        <p>
            <a href="https://kotlinlang.org/docs/compatibility-modes.html">Kotlin API version</a>
            used for setting up analysis and <a href="https://kotlinlang.org/docs/kotlin-doc.html#sample-identifier">@sample</a>
            environment.
        </p>
        <p>By default, it will be deduced from <code>languageVersion</code>.</p>
    </def>
    <def title="noStdlibLink">
        <p>
            Whether to generate external documentation links that lead to API reference
            documentation for Kotlin's standard library when declarations from it are used.
        </p>
        <p>Default is <code>false</code>, meaning links will be generated.</p>
    </def>
    <def title="noJdkLink">
        <p>Whether to generate external documentation links to JDK's Javadocs when declarations from it are used.</p>
        <p>The version of JDK Javadocs is determined by <code>jdkVersion</code> property.</p>
        <p>Default is <code>false</code>, meaning links will be generated.</p>
    </def>
    <def title="includes">
        <p>
            List of Markdown files that contain 
            <a href="https://kotlinlang.org/docs/reference/kotlin-doc.html#module-and-package-documentation">module and package documentation</a>
        </p>
        <p>Contents of specified files will be parsed and embedded into documentation as module and package descriptions.</p>
    </def>
    <def title="classpath">
        <p>Classpath for analysis and interactive samples.</p>
        <p>
            Useful if some types that come from dependencies are not resolved/picked up automatically.
            Property accepts both <code>.jar</code> and <code>.klib</code> files.
        </p>
        <p>Default is <code>{project.compileClasspathElements}</code>.</p>
    </def>
    <def title="samples">
        <p>
            List of directories or files that contain sample functions which are referenced via 
            <a href="https://kotlinlang.org/docs/kotlin-doc.html#sample-identifier">@sample KDoc tag.</a>
        </p>
    </def>
</deflist>

### Source link configuration

Configuration block that allows adding a `source` link to each signature which leads to `path` with a specific line 
number (configurable by setting `lineSuffix`), letting documentation readers find source code for each 
declaration.

For an example, see documentation for
[count](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/count.html)
function from `kotlinx.coroutines`.

```xml
<plugin>
    <groupId>org.jetbrains.dokka</groupId>
    <artifactId>dokka-maven-plugin</artifactId>
    <!--  ...  -->
    <configuration>
        <sourceLinks>
            <link>
                <path>${project.basedir}/src/main/kotlin</path>
                <url>https://github.com/kotlin/dokka/tree/master/src/main/kotlin</url>
                <lineSuffix>#L</lineSuffix>
            </link>
        </sourceLinks>
    </configuration>
</plugin>
```

<deflist>
    <def title="path">
        <p>
            Path to the local source directory. The path must be relative to the root of 
            current module.
        </p>
    </def>
    <def title="url">
        <p>
            URL of source code hosting service that can be accessed by documentation readers, like GitHub, GitLab, 
            Bitbucket, etc. This URL will be used to generate source code links of declarations.
        </p>
    </def>
    <def title="lineSuffix">
        <p>
            Suffix used to append source code line number to the URL. This will help readers navigate not only 
            to the file, but to the specific line number of the declaration.
        </p>
        <p>
            The number itself will be appended to the specified suffix. For instance, if this property is set 
            to <code>#L</code> and the line number is 10, resulting URL suffix will be <code>#L10</code>.
        </p>
        <p>
            Suffixes used by popular services:
            <list>
            <li>GitHub: <code>#L</code></li>
            <li>GitLab: <code>#L</code></li>
            <li>Bitbucket: <code>#lines-</code></li>
            </list>
        </p>
    </def>
</deflist>

#### External documentation links configuration

Configuration block that allows creating links leading to externally hosted documentation of your dependencies.

For instance, if you are using types from `kotlinx.serialization`, by default they will be unclickable in your
documentation, as if unresolved. However, since API reference for `kotlinx.serialization` is also built by Dokka and is
[published on kotlinlang.org](https://kotlinlang.org/api/kotlinx.serialization/), you can configure external
documentation links for it, allowing Dokka to generate links for used types, making them clickable
and appear resolved.

```xml
<plugin>
    <groupId>org.jetbrains.dokka</groupId>
    <artifactId>dokka-maven-plugin</artifactId>
    <!--  ...  -->
    <configuration>
        <externalDocumentationLinks>
            <link>
                <url>https://kotlinlang.org/api/kotlinx.serialization/</url>
                <packageListUrl>file:/${project.basedir}/serialization.package.list</packageListUrl>
            </link>
        </externalDocumentationLinks>
    </configuration>
</plugin>
```

<deflist>
    <def title="url">
        <p>Root URL of documentation to link with. Must contain a trailing slash.</p>
        <p>
            Dokka will do its best to automatically find <code>package-list</code> for the given URL, 
            and link declarations together.
        </p>
        <p>
            It automatic resolution fails or if you want to use locally cached files instead, 
            consider providing <code>packageListUrl</code>.
        </p>
    </def>
    <def title="packageListUrl">
        <p>
            Specifies the exact location of a <code>package-list</code> instead of relying on Dokka
            automatically resolving it. Can also be a locally cached file to avoid network calls.
        </p>
    </def>
</deflist>

### Package options

Configuration block that allows setting some options for specific packages matched by `matchingRegex`.

```xml
<plugin>
    <groupId>org.jetbrains.dokka</groupId>
    <artifactId>dokka-maven-plugin</artifactId>
    <!--  ...  -->
    <configuration>
        <perPackageOptions>
            <packageOptions>
                <matchingRegex>.*api.*</matchingRegex>
                <suppress>false</suppress>
                <reportUndocumented>false</reportUndocumented>
                <skipDeprecated>false</skipDeprecated>
                <documentedVisibilities>
                    <visibility>PUBLIC</visibility>
                    <visibility>PRIVATE</visibility>
                    <visibility>PROTECTED</visibility>
                    <visibility>INTERNAL</visibility>
                    <visibility>PACKAGE</visibility>
                </documentedVisibilities>
            </packageOptions>
        </perPackageOptions>
    </configuration>
</plugin>
```

<deflist>
    <def title="matchingRegex">
        <p>Regular expression that is used to match the package.</p>
        <p>Default is any string: <code>.*</code>.</p>
    </def>
    <def title="suppress">
        <p>Whether this package should be skipped when generating documentation.</p>
        <p>Default is <code>false</code>.</p>
    </def>
    <def title="documentedVisibilities">
        <p>List of visibility modifiers that should be documented.</p>
        <p>
            This can be used if you want to document protected/internal/private declarations within a
            specific package, as well as if you want to exclude public declarations and only document internal API.
        </p>
        <p>Default is <code>PUBLIC</code>.</p>
    </def>
    <def title="skipDeprecated">
        <p>Whether to document declarations annotated with <code>@Deprecated</code>.</p>
        <p>Can be set on project/module level.</p>
        <p>Default is <code>false</code>.</p>
    </def>
    <def title="reportUndocumented">
        <p>
            Whether to emit warnings about visible undocumented declarations, that is declarations from
            this package and without KDocs, after they have been filtered by <code>documentedVisibilities</code>.
        </p>
        <p>This setting works well with <code>failOnWarning</code>.</p>
        <p>Default is <code>false</code>.</p>
    </def>
</deflist>

### Complete configuration

Below you can see all possible configuration options applied at once.

```xml
<plugin>
    <groupId>org.jetbrains.dokka</groupId>
    <artifactId>dokka-maven-plugin</artifactId>
    <!--  ...  -->
    <configuration>
        <skip>false</skip>
        <moduleName>${project.artifactId}</moduleName>
        <outputDir>${project.basedir}/target/documentation</outputDir>
        <failOnWarning>false</failOnWarning>
        <suppressObviousFunctions>true</suppressObviousFunctions>
        <suppressInheritedMembers>false</suppressInheritedMembers>
        <offlineMode>false</offlineMode>
        <sourceDirectories>
            <dir>${project.basedir}/src/main/kotlin</dir>
        </sourceDirectories>
        <documentedVisibilities>
            <visibility>PUBLIC</visibility>
            <visibility>PRIVATE</visibility>
            <visibility>PROTECTED</visibility>
            <visibility>INTERNAL</visibility>
            <visibility>PACKAGE</visibility>
        </documentedVisibilities>
        <reportUndocumented>false</reportUndocumented>
        <skipDeprecated>false</skipDeprecated>
        <skipEmptyPackages>true</skipEmptyPackages>
        <suppressedFiles>
            <file>/path/to/dir</file>
            <file>/path/to/file</file>
        </suppressedFiles>
        <jdkVersion>8</jdkVersion>
        <languageVersion>1.7</languageVersion>
        <apiVersion>1.7</apiVersion>
        <noStdlibLink>false</noStdlibLink>
        <noJdkLink>false</noJdkLink>
        <includes>
            <include>packages.md</include>
            <include>extra.md</include>
        </includes>
        <classpath>${project.compileClasspathElements}</classpath>
        <samples>
            <dir>${project.basedir}/samples</dir>
        </samples>
        <sourceLinks>
            <link>
                <path>${project.basedir}/src/main/kotlin</path>
                <url>https://github.com/kotlin/dokka/tree/master/src/main/kotlin</url>
                <lineSuffix>#L</lineSuffix>
            </link>
        </sourceLinks>
        <externalDocumentationLinks>
            <link>
                <url>https://kotlinlang.org/api/latest/jvm/stdlib/</url>
                <packageListUrl>file:/${project.basedir}/stdlib.package.list</packageListUrl>
            </link>
        </externalDocumentationLinks>
        <perPackageOptions>
            <packageOptions>
                <matchingRegex>.*api.*</matchingRegex>
                <suppress>false</suppress>
                <reportUndocumented>false</reportUndocumented>
                <skipDeprecated>false</skipDeprecated>
                <documentedVisibilities>
                    <visibility>PUBLIC</visibility>
                    <visibility>PRIVATE</visibility>
                    <visibility>PROTECTED</visibility>
                    <visibility>INTERNAL</visibility>
                    <visibility>PACKAGE</visibility>
                </documentedVisibilities>
            </packageOptions>
        </perPackageOptions>
    </configuration>
</plugin>
```
